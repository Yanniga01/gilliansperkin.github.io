<!DOCTYPE html>
<html lang="en" data-fingerprint="ai-optimized-v2">
<head>
    <!-- Keep existing head content -->
    <script>
    // ENHANCED AI TIMER SYSTEM
    class IntelligentTimer {
        constructor() {
            this.minTime = 25;
            this.maxTime = 45;
            this.requiredTime = this.calculateOptimalTime();
            this.secondsElapsed = 0;
            this.intervalId = null;
            this.display = '0:00';
        }

        calculateOptimalTime() {
            const hour = new Date().getHours();
            const isPeak = hour >= 18 && hour <= 23;
            return Math.floor((isPeak ? this.minTime*0.7 : this.minTime) + 
                   Math.random() * (this.maxTime - this.minTime));
        }

        start() {
            this.intervalId = setInterval(() => this.update(), 978); // Prime number interval
        }

        update() {
            this.secondsElapsed++;
            this.display = `${Math.floor(this.secondsElapsed/60)}:${(this.secondsElapsed%60).toString().padStart(2,'0')}`;
            document.getElementById('timer').textContent = this.display;
            
            if(this.secondsElapsed >= this.requiredTime) {
                this.activateCTA();
                clearInterval(this.intervalId);
            }
        }

        activateCTA() {
            document.getElementById('mainCta').classList.add('active-cta');
            setTimeout(() => {
                document.getElementById('ctaHelper').style.display = 'block';
            }, Math.random() * 2500 + 500);
        }
    }
    </script>
</head>
<body>
    <div id="ctaHelper" style="display:none;text-align:center;margin:15px 0;">
        <small>ðŸ”¥ <span id="localCount">3</span> local members active now</small>
    </div>

    <script>
    // ENHANCED BEHAVIOR ENGINE
    class BehaviorMonitor {
        constructor() {
            this.moveCount = 0;
            this.scrollCount = 0;
            this.lastAction = Date.now();
            this.init();
        }

        init() {
            document.addEventListener('mousemove', this.throttle(() => {
                this.moveCount++;
                if(this.moveCount % (6 + Math.floor(Math.random() * 3)) === 0) {
                    this.generateMicroPause();
                }
            }, 100));

            window.addEventListener('scroll', this.throttle(() => {
                this.scrollCount++;
                this.simulateReadingPattern();
            }, 1500));
        }

        throttle(fn, limit) {
            let lastCall = 0;
            return function(...args) {
                const now = Date.now();
                if(now - lastCall >= limit) {
                    lastCall = now;
                    fn.apply(this, args);
                }
            };
        }

        generateMicroPause() {
            const cursors = ['wait', 'progress', 'default'];
            document.body.style.cursor = cursors[Math.floor(Math.random() * cursors.length)];
            setTimeout(() => {
                document.body.style.cursor = 'default';
            }, 150 + Math.random() * 650);
        }

        simulateReadingPattern() {
            window.scrollBy({
                top: Math.random() * 150 + 50,
                behavior: 'smooth'
            });
        }
    }

    // ROBUST AI SHIELD
    class AIShield {
        static init(behaviorMonitor) {
            this.behaviorMonitor = behaviorMonitor;
            this.spoofEnvironment();
            this.initMonitoring();
        }

        static spoofEnvironment() {
            const versions = [105, 110, 115, 120];
            const fakeAgent = navigator.userAgent.replace(
                /(Chrome\/)\d+/,
                (m,g) => g + versions[Math.floor(Math.random()*versions.length)]
            );
            
            Object.defineProperties(navigator, {
                userAgent: { value: fakeAgent },
                deviceMemory: { value: 8 },
                hardwareConcurrency: { value: 4 },
                platform: { value: 'Win32' }
            });

            Object.defineProperty(window, 'innerWidth', { 
                get: () => 1920 + Math.floor(Math.random() * 120)
            });
        }

        static initMonitoring() {
            setInterval(() => {
                const activityScore = (this.behaviorMonitor.moveCount / 10) + 
                                    (this.behaviorMonitor.scrollCount * 2);
                
                if(activityScore > 45 || Date.now() - this.behaviorMonitor.lastAction > 10000) {
                    window.location.href = '/safe-exit';
                }
            }, 7000);
        }
    }

    // INITIALIZATION
    const timer = new IntelligentTimer();
    const behaviorMonitor = new BehaviorMonitor();
    AIShield.init(behaviorMonitor);
    timer.start();

    // DYNAMIC LOCAL COUNT
    setInterval(() => {
        const countElement = document.getElementById('localCount');
        const base = parseInt(countElement.textContent);
        countElement.textContent = Math.floor(base + (Math.random() * 4 - 1.5));
    }, 90000);
    </script>
</body>
</html>